# Игра автодартс


## 1.	Цель игры

    Пройти путь и остановится точно в заданной точке, или пройти с остановками по трем точкам последовательно - за минимальное время и с максимальной точностью остановки в каждой точке по заданному расстоянию.
    
    Цель минимум времени и максимум точности попадания!!!!

### 1.1.	Условия начала игры

В начале игры пользователь в интерактивном режиме формирует следующий выбор:

        1. формирует путь из числа предустановленных блоков-участков (прямая, поворот, тип покрытия участка), для каждого участка задаются дополнительные параметры (уклон/подъем для обоих участков, левый/правый поворот и его угол и радиус для поворота)
        2. тип покрытия участка определяется дополнительым выбором (асфальт, грунт, щебень), а также условием состояния покрытия (разбитое, хорошее, идеальное)
        3. для каждого блока и словия в системные настройки прошиваются заданные коэффициенты кроме вводимых пользователем по п.1
        4. в результате игрок формирует свободную трассу со своими заданными параметрами 
        5. данная созданная трасса сохраняется в файл с названием трассы и может быть потом использован или отредактирован 
        6. файл трассы собирается из параметрических блоков в последовательности указанной пользователем и редактируется по аналогии создания по номеру последовательности блока 
        7. выбирает транспортное средство (машину) из числа также пердустановленных (для начала 10 штук)
        8. машины задаются параметрами мощности, типа КПП (автомат или ручная), массы - эти параметры нужны для определения ускорений (тип кпп учитывается коэффициентом снижения ускорения)
        9. формирует условия погоды из числа предустановленных (дождь, снег, жара, гололёд) эти условия задаются коэффициентом проскальзывания в целом для всей трассы
        10. на трассе отмечаюися точки остановки, как заданное расстояние от старта (с учетом автоматического расчета длины трассы), точек остановки всего может быть от 1 до 3 штук.
        11. в итоге пользователь в начале игры формирует трассы и выбирает погоду и тип машины - что является определяющим начало игры, а также точки прибытия

### 1.2.	Условия завершения

Завершением игры является выполнение определённых условий:

    1. пользователь выбирает тип завершения игры:
       1. время прохождения трассы до соответсвующей точки останова,
       2. врмя прохождения всех точек,
       3. точность попадания (останова) в точке,
       4. время прохождения и точность останова в точке. 
    2. выбор схемы завершения определяется в условиях старта
    3. допускается 3 попытки прохода:
       1. проба трассы,
       2. квалификация,
       3.  соревнование.

### 1.3.	Алгоритм расчёта победы

       1. оценивается победа по минимальному времени прохождения и точности остановки в заданной точке и/или последовательности точек
       2. по сути это произведение абсолютного значения отклонения по расстоянию на время прохождения.

### 1.4.	Взаимодействие с виртуальным соперником

       1. виртуальный соперник это игрок проходящий ту же трассу, на любой выбраной основным игроком машине, который по действиям управления дублирует основного игрока с некоторым незначительным заданным отклонением на основе случайной функции
       2. значние предельного отклонения задаются уровнем "квалификации" соперника 

## 2.	Базовый алгоритм игрового процесса

### 2.1.	Входные фиксированные конфигурационные данные в программе:

     1. статичные данные в теле программы запрещены

### 2.2.	Входные данные в файле конфигурации:

     1. набор коэффициентов сцепления для базовых типов покрытий трассы
     2. набор коэффициентов влияния на сцепление сотояния погоды
     3. набор коэффициентов влияния на время (снижающих скорость) от сотояния покрытия
     4. парамеры каждого предустановленного блока трассы согласно раздела 1.1 (набор блоков для конструирования трассы)
     5. пердустановленные машины (мощности, массы, тип кпп машин (определяет коэффициент замедления набора скорости), параметры скорости машин для учета срабатывания КПП в режиме механики)
     6. коэффициенты "квалификации" соперника
     7.  все данные собираются в виде конфигурационного файла и считываются при запуске игры

### 2.3.	Входные конфигурационные данные пользователя в интерактивном режиме:

       1. количество блоков трассы
       2. тип блоков трассы
       3. последовательность блоков
       4. выбор погоды
       5. выбор машины себе и сопернику
       6. выбор мощности машины себе и сопернику
       7. выбор ускорения свободного замедления машины без воздействия (ускорение свободного выбега)
       8. выбор типа КПП машины себе и сопернику
       9. быбор схемы соревнования согласно разделу 1.3

### 2.4.	Условия и общие данные на выбор пользователя интерактивный режим:

     1. имя и путь файла сохранения исходных данных игры
     2. имя и путь файла результатов игры (накопительный) для сравнения
     3. управление файлами

### 2.5.	Основные данные транспорта:

    Предустановленные машины согласно раздела 2.2

### 2.6.	Основные данные пути:

     1. прямая
     2. поворот        
     3. подъем
     4. спуск
     5. тип покрытие
     6. предустановленный коэффициент сцепления типа покрытия
     7. предустановленный коэффициент состояния покрытия

### 2.7.	Основные данные поворотов:

     1. радиус
     2. угол

### 2.8.	Основные данные подъёма и спуска:

     1. длина
     2. угол
     3. тип (подём/спуск)

### 2.9.	Основные типы погоды:

     1. дождь
     2. снег
     3. жара
     4. гололёд

### 2.10.	Основной алгоритм взаимосвязи погоды и пути (определение состояния пути)

    Через набор коэффициентов от погоды корректируется коэффициент сцепления покрытия не зависимо отего типа. Коэффициент сцепления определяет пробуксовку что влияет на ускорение разгона и торможения машины, но в разной степени.

### 2.11.	Алгоритм связи поворотов подъёмов и спусков с состоянием пути (формирование определяющего набора коэффициентов) – создание трека:

    Трек набирается из характерных последовательно пронумерованных блоков в последовательность пути, на каждом блоке задается коэффициент состояния пути, определяющий индивидуальный коэффициент сцепления. 
    Подъём и спад задаются коэффициентом замедления или ускорения в зависимости от угла проекции участка с учетом потери мощности на скорость подъема. Из заданной последовательности характерных блоков формируется трек. 

### 2.12.	Основной алгоритм управления транспортом с клавиатуры
   
    Пользователь управляет только разгоном (газом) и торможением (тормозом). 
    И то и другое осуществляется стрелками ввер или вниз, время нажатия стрелки определяет время нажатия на газ или тормоз. 
    Одновременно с этим нажимается и удержимается по времени кнопка "s" определяющая по времени силу нажатия в интервале 5 секунд от 0 до максимальной для ускорения и от 0 до полной блокировки колес (юза) для торможения.
    Т.е. управление происходит тремя кнопками.

### 2.13.	Основной алгоритм управления для КПП (ручная или автомат)

    КПП учитывается заданным коэффициентом снижения ускорения для машины. Реализуется это через прерывание ускорения на заданное время (3 секунды) 5 раз на определенных интервалах ускорения при переходе через заданный порог скорости.

### 2.14.	Основной алгоритм торможения и разгона транспорта с учётом элементов и состояния трека

    Разгон и торможение определяются коэффициентом сцепления участка трассы, массой и мощностью машины, углом подъема и спуска, а также скоростными интервалами на учет работы КПП. 
    Строится в виде отдельного математического блока. 
    Также необходимо учесть что подъём и спуск даже при отсутсвии ускорения за счет скорости подъёма или спука создает либо ускорение торможения или разгона в зависимости от угла и длины (времени) подъёмаспуска.
    Матблок не простой с математической точки зрения и требует сбора и анализа соответсвующей литературы, реализация блока в виде отдельной библиотеки, чтобы не усложнять код основной программы.

### 2.15.	Основной алгоритм управление транспортом с учётом условий трека (скольжение, снос с трека, занос, пробуксовка, замедление/ускорение, влияние подъёма/спуска)

    Основа указана в разделе 2.14, но при последующей реализации игры надо предусмотреть так называемые условия сноса/заноса с трека при определенных сочетаниях коэффициента сцепления и величин ускорения торможения/разгона и скорости прохождения поворота.

### 2.16.	Математический алгоритм отклика транспорта на управление с учётом параметров управления транспортом и трека:

     1. стрелка ввер нажатие на газ на минимальном уровне
     2. стрелка вниз торможение на минимальном уровне
     3. нажатие кнопки "s" и удержание одновременно со стрелками изменение мощности по времени до максимума и аналогично силы торможения до блокировки
     4. время удержаня имитирует нажатие на газ или тормоз и задается в интервале до 5 секнд
     5. отпускание кнопки "s" эквивалентно отпусканию тормоза или газа, что прекращает ускорение торможения или разгона и переводит машину в свободный выбег (ускорение замедления заданное для каждой машины по умолчанию, влияние состояния трассы на свободное замедление пока не учитываем, только подъемы и спуски)

### 2.17.	Математический алгоритм условия попадания в цель и расчёт показателя точности с учётом времени прохождения трека

    Произведение абсолютного отлонения от заданной точки трассы (определяемой расстоянием от начала до точки) на время прохождения пути - чем меньше это значение тем лучше результат - сравнение идет со статистикой или с виртуальным соперником.

### 3. Дополнительные блоки (название определяет содержание):

     1. Блок формирования статистики игры с записью в файл сравнения
     2. Блок интерактивных/голосовых подсказок по элементам игры
     3. Блок расширенных данных (база) по транспорту, погоде и путям для выбора
     4. Перспективный конструктор для интерактивного создания и сохранения блоков трека и транспорта (конфигуратор для раздела 2.2 п. 4 и 5) 
